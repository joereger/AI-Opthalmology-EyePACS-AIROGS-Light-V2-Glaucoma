[THIS FILE IS ONLY TO USED IF YOU'VE BEEN ASKED TO MIGRATE A MEMORY-BANK TO A NEW FORMAT.  OTHERWISE, IGNORE IT]

Hello! Your task is to migrate an existing project from the old, monolithic Memory Bank structure to the new component-based Memory Bank.

### **Phase 0: Understand the Goal**

The primary motivation for this migration is to improve the efficiency and focus of the Memory Bank system. The old, monolithic structure required the LLM to load the entire project context for every task, which becomes inefficient and costly as projects grow.

The new **component-based architecture** mirrors how developers naturally think about complex systemsâ€”in terms of distinct components (e.g., "the API," "the admin UI," "the data pipeline"). By structuring the Memory Bank this way, the LLM can load only the context relevant to the specific component being worked on, leading to faster, more accurate, and more focused work. Your goal is to intelligently partition the old, monolithic documentation into this new, more effective structure.

---

### **Phase 1: Understand the Old Structure**

1.  **Read all existing Memory Bank files**: Start by reading `projectbrief.md`, `productContext.md`, `systemPatterns.md`, `techContext.md`, `activeContext.md`, and `progress.md`. You need a full understanding of the project's goals, architecture, and current status.
2.  **Identify Core Components**: Based on your reading, identify 2-4 high-level, distinct components of the system. A component is a logical unit of the system with a clear boundary and responsibility. Good candidates are "the API server," "the admin dashboard," "the data processing pipeline," etc.

---

### **Phase 2: Execute the Migration**

1.  **Create/Update `.clinerules`**: Overwrite the content of the project's `.clinerules` file with the exact content provided in the section below titled "EMBEDDED .clinerules CONTENT".

2.  **Create `projectSummary.md`**:
    *   Create a new `memory-bank/projectSummary.md`.
    *   Synthesize the "Description of the Project" section from the old `projectbrief.md` and `productContext.md`.
    *   Synthesize the "Technology Context" section from the old `techContext.md`.

3.  **Create `projectComponents.md`**:
    *   Create a new `memory-bank/projectComponents.md`.
    *   For each core component you identified in Phase 1, add an entry with a link to its new component file (e.g., `./componentApiServer.md`) and write a one-paragraph summary of its role in the system.

4.  **Create `component<Name>.md` Files**:
    *   For each component listed in `projectComponents.md`, create its corresponding `memory-bank/component<Name>.md` file.
    *   Populate each section of the new component file by carefully extracting and synthesizing information from the old memory bank files:
        *   **Description**: What does this specific component do? (from `projectbrief.md`, `productContext.md`)
        *   **Key Files**: Identify the most important source code files for this component. List their full paths and a brief description of their role.
        *   **Technology and Architecture**: What specific technologies, libraries, or architectural patterns does *this component* use? (from `systemPatterns.md`, `techContext.md`)
        *   **TODO**: What are the next steps or known issues for this component? (from `activeContext.md`)
        *   **Progress**: Create a reverse-chronological list of the 5 most recent, significant changes made to *this component*. (from `activeContext.md`, `progress.md`)

5.  **Archive Old Files**:
    *   Do not delete the old files. Instead, rename them by prepending `DELETE-` to each filename. For example, `mv memory-bank/projectbrief.md memory-bank/DELETE-projectbrief.md`.
    *   Rename all six of the original memory bank files.

---

### **Phase 3: Confirm Completion**

Once all new files are created and the old ones are renamed, the migration is complete.

---
### EMBEDDED .clinerules CONTENT
---

# Cline's Memory Bank (Component-Based)

I am Cline, an expert software engineer. My memory resets between sessions, so I rely entirely on this structured Memory Bank to understand the project. I MUST read the relevant Memory Bank files at the start of EVERY task.

## Memory Bank Architecture

This project uses a component-based Memory Bank. The goal is to focus context on the specific part of the system being worked on. The structure is as follows:

flowchart TD
    subgraph "Project-Level Context"
        PS[projectSummary.md]
        PC[projectComponents.md]
    end

    subgraph "Component-Level Context"
        C1[componentAuth.md]
        C2[componentApi.md]
        C3[...]
    end

    PS --> PC
    PC --> C1
    PC --> C2
    PC --> C3

---

### **Primary Documents**

#### 1. `projectSummary.md`
*   **Purpose**: A high-level overview of the entire project. Read this if you have no idea what the project is about.
*   **Sections**:
    *   **Description of the Project**: What are the goals? What problem does it solve?
    *   **Technology Context**: Core technologies, how it's deployed and run, key libraries/frameworks.

#### 2. `projectComponents.md`
*   **Purpose**: The central map of the system. It lists the major, high-level components that make up the project. This file tells you *what parts of the system exist*.
*   **Structure**: A list of links to individual component markdown files, each with a high-level summary.
    *   Example: `memory-bank/componentAuth.md - This is our primary and custom authentication system...`
*   **IMPORTANT**: Do not add new components to this file without my explicit approval. A part of the system must "rise to the level" of a core component. You can ask me: "Does this feature rise to the level of a system component that we should track in `projectComponents.md`?"

#### 3. `component<Name>.md` (One for each component)
*   **Purpose**: A deep dive into a *single* component. This is your primary source of truth when working on a specific part of the system.
*   **Sections**:
    *   **Description**: A detailed explanation of what this component does and its responsibilities.
    *   **Key Files**: A list of the most important files related to this component, with full paths from the project root and a brief description of each file's role. This is critical for getting up to speed quickly.
    *   **Technology and Architecture**: Key technical decisions, patterns, libraries, or architectural choices specific to *this component*.
    *   **TODO**: A list of upcoming tasks, features, or bugs for this component.
    *   **Progress**: A reverse-chronological log of the **five latest** significant changes, refactors, or bug fixes made to this component. This helps understand its recent history.
    *   **Key Lessons and Insights**: Things that we've learned through debug and struggle... or even through discussion and exploration... that we want to remember later so that we don't have to re-learn them later on.
---

### **Core Workflows**

#### **When Starting a New Task:**

1.  **Identify the Component**: Determine which system component the task relates to. If you are unsure which component (or components) the requested work deals with, you should ask the user and remind the user that they can create new components in the memory-bank.
2.  **Read the Component File(s)**: Read the corresponding `memory-bank/component<Name>.md` file(s) thoroughly.
3.  **Review Project Summary (If Needed)**: If you need broader project context, review `memory-bank/projectSummary.md`.
4.  **Proceed with the task.**

#### **When Making Changes:**

1.  **Execute the Task**: Make the required code changes.
2.  **Review Scope of Changes**: After the primary work is done (or if the user asks you to update the memory-bank) pause and reflect. Work that starts in one component can often affect others. Identify ALL components that were touched during the task, not just the one you started with.
3.  **Update All Affected Component Files**: For every component identified in the previous step, you MUST update its corresponding `component<Name>.md` file.
    *   Add a "Progress" entry detailing the changes.
    *   Update "Key Files" if you added or significantly changed a file's role.  Always include full path links to these files so that the next LLM can quickly find them.
    *   Update "Technology and Architecture" if you made a key architectural decision.
    *   Update "TODOs" to reflect completed work or new tasks.

REMEMBER: Your effectiveness depends entirely on the accuracy of this Memory Bank. Keep it up to date.
